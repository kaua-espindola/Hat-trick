<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - Configurações</title>
  <link rel="stylesheet" href="../web/style.css" />
  <link rel="icon" href="../assets/logo.png" type="image/png">
</head>

<body>
  <header>
    <div class="logo">
      <a href="/web/inicial.html">
        <img src="/assets/logo.png" alt="Logo Goal" />
      </a>
    </div>
    </div>
    <div class="barra-pesquisa" style="display: flex; gap: 10px; align-items: center;">
      <input type="text" id="buscar-usuario" placeholder="Buscar por nome, email, função..." style="flex: 1;" />
      <input type="text" id="buscar-por-id" placeholder="Buscar por ID..." style="width: 200px;" />
    </div>
    <div class="avatar-wrapper" id="avatarBtn">
      <img src="../assets/perfilsemfoto.jpeg" alt="Avatar" class="avatar-perfil" />
    </div>
    <div class="dropdown-menu" id="dropdownMenu">
      <div class="user-info">
        <img src="../assets/perfilsemfoto.jpeg" alt="Avatar" class="avatar-perfil dropdown-avatar" />
        <div>
          <strong>Administrador</strong>
        </div>
      </div>
      <hr />
      <a href="#">Meus Dados</a>
      <a href="#">Configurações</a>
      <a href="../index.html" class="logout">Sair</a>
    </div>
  </header>

  <section class="section">
    <h2>Gerenciamento de Usuários</h2>
    <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px;">
      <button class="login-btn" onclick="abrirFormulario()">Cadastrar Novo Usuário</button>
      <button class="login-btn" onclick="limparBuscas()" style="background: #6c757d;">Limpar Buscas</button>
    </div>
    
    <!-- Indicador de carregamento -->
    <div id="loading" style="display:none; text-align:center; margin:20px;">
      <p>Carregando usuários...</p>
    </div>

    <!-- Contador de resultados -->
    <div id="contador-resultados" style="margin:10px 0; color:#bbb; font-size:14px;">
      <!-- Será preenchido via JavaScript -->
    </div>

    <div class="classificacao-container">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Função</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="tabela-usuarios">
          <!-- Usuários serão inseridos aqui via JS -->
        </tbody>
      </table>
    </div>
  </section>

  <!-- Modal de Formulário -->
  <div id="modal-form" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
    background-color:rgba(0,0,0,0.5); display:flex; align-items:center; justify-content:center;">
    <div class="login-card" style="width:400px;">
      <h2 id="form-titulo">Cadastrar Usuário</h2>
      <form id="form-usuario">
        <input type="hidden" id="usuario-id" />
        <label for="nome">Nome:</label>
        <input type="text" id="nome" placeholder="Nome completo" required />
        <label for="email">Email:</label>
        <input type="email" id="email" placeholder="Email" required />
        <label for="telefone">Telefone:</label>
        <input type="tel" id="telefone" placeholder="(xx) xxxxx-xxxx" />
        <label for="funcao">Função:</label>
        <select id="funcao" required>
          <option value="">Selecione uma função</option>
          <option value="administrador">Administrador</option>
          <option value="usuario">Usuário</option>
        </select>
        <label for="senha">Senha:</label>
        <input type="password" id="senha" placeholder="Digite a senha" />
        <small id="senha-help" style="color: #bbb; font-size: 12px;">*Deixe em branco para manter a senha atual (apenas edição)</small>
        <button type="submit" class="login-btn">Salvar</button>
        <button type="button" class="login-btn" onclick="fecharFormulario()" style="background:#777; margin-top:10px;">Cancelar</button>
      </form>
    </div>
  </div>

  <!-- Script específico para admin -->
  <script src="../src/config.js"></script>
  <script src="../src/config-adm.js"></script>
</body>

</html>
